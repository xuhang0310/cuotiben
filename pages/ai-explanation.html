<!-- AIè®²è§£ä¸­å¿ƒé¡µé¢ -->
<div id="ai-explanation" class="ant-page">
    <div class="page-header">
        <h2 class="page-title">AIé”™é¢˜è®²è§£</h2>
        <div class="page-actions">
            <button class="ant-btn ant-btn-default" id="clearChat">
                <i class="fas fa-trash"></i>
                æ¸…ç©ºå¯¹è¯
            </button>
            <button class="ant-btn ant-btn-primary" id="voiceToggle">
                <i class="fas fa-microphone"></i>
                è¯­éŸ³è¾“å…¥
            </button>
        </div>
    </div>
    
    <div class="ai-container">
        <div class="ai-chat-container">
            <div class="chat-messages" id="chatMessages">
                <div class="message ai-message">
                    <div class="avatar ai-avatar">ğŸ¤–</div>
                    <div class="message-content">
                        <p>ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„AIå­¦ä¹ åŠ©æ‰‹ï¼Œå¯ä»¥å¸®ä½ ï¼š</p>
                        <ul>
                            <li>ğŸ“ é”™é¢˜çŸ¥è¯†ç‚¹åˆ†æ</li>
                            <li>ğŸ’¡ è§£é¢˜æ€è·¯æŒ‡å¯¼</li>
                            <li>ğŸ“š ç›¸å…³çŸ¥è¯†ç‚¹æ¨è</li>
                            <li>ğŸ¯ å­¦ä¹ è®¡åˆ’å»ºè®®</li>
                        </ul>
                        <p>è¯·é€‰æ‹©ä¸€é“é”™é¢˜æˆ–ç›´æ¥å‘æˆ‘æé—®å§ï¼</p>
                    </div>
                    <div class="message-time">åˆšåˆš</div>
                </div>
                
                <div class="message user-message">
                    <div class="avatar user-avatar">å¼ </div>
                    <div class="message-content">
                        <p>è¿™é“å‡½æ•°é¢˜æˆ‘ä¸å¤ªæ˜ç™½ï¼Œèƒ½å¸®æˆ‘åˆ†æä¸€ä¸‹å—ï¼Ÿ</p>
                    </div>
                    <div class="message-time">2åˆ†é’Ÿå‰</div>
                </div>
                
                <div class="message ai-message">
                    <div class="avatar ai-avatar">ğŸ¤–</div>
                    <div class="message-content">
                        <p>å½“ç„¶å¯ä»¥ï¼è¿™æ˜¯ä¸€é“å¤åˆå‡½æ•°æ±‚å¯¼é¢˜ã€‚è®©æˆ‘ä¸ºä½ è¯¦ç»†åˆ†æï¼š</p>
                        <div class="analysis-card">
                            <h4>ğŸ” é¢˜ç›®åˆ†æ</h4>
                            <p>è¿™é“é¢˜è€ƒæŸ¥çš„æ˜¯å¤åˆå‡½æ•°çš„æ±‚å¯¼æ³•åˆ™ï¼ˆé“¾å¼æ³•åˆ™ï¼‰</p>
                        </div>
                        <div class="analysis-card">
                            <h4>ğŸ“‹ è§£é¢˜æ­¥éª¤</h4>
                            <ol>
                                <li>è¯†åˆ«å†…å¤–å±‚å‡½æ•°</li>
                                <li>åˆ†åˆ«æ±‚å¯¼å¤–å±‚å’Œå†…å±‚å‡½æ•°</li>
                                <li>åº”ç”¨é“¾å¼æ³•åˆ™ç›¸ä¹˜</li>
                                <li>åŒ–ç®€å¾—åˆ°æœ€ç»ˆç»“æœ</li>
                            </ol>
                        </div>
                        <div class="action-buttons">
                            <button class="action-btn" onclick="playExplanation()">
                                <i class="fas fa-play"></i>
                                è¯­éŸ³æ’­æ”¾
                            </button>
                            <button class="action-btn" onclick="showSimilarQuestions()">
                                <i class="fas fa-search"></i>
                                ç›¸ä¼¼é¢˜ç›®
                            </button>
                        </div>
                    </div>
                    <div class="message-time">1åˆ†é’Ÿå‰</div>
                </div>
            </div>
            
            <div class="chat-input-container">
                <div class="quick-questions">
                    <button class="quick-btn" onclick="askQuickQuestion('è§£é¢˜æ€è·¯')">
                        ğŸ’¡ è§£é¢˜æ€è·¯
                    </button>
                    <button class="quick-btn" onclick="askQuickQuestion('çŸ¥è¯†ç‚¹')">
                        ğŸ“š ç›¸å…³çŸ¥è¯†ç‚¹
                    </button>
                    <button class="quick-btn" onclick="askQuickQuestion('æ˜“é”™ç‚¹')">
                        âš ï¸ å¸¸è§æ˜“é”™ç‚¹
                    </button>
                    <button class="quick-btn" onclick="askQuickQuestion('ç»ƒä¹ é¢˜')">
                        ğŸ“ æ¨èç»ƒä¹ 
                    </button>
                </div>
                
                <div class="chat-input">
                    <input type="text" class="chat-input-field" id="chatInput" placeholder="è¾“å…¥ä½ çš„é—®é¢˜...">
                    <button class="attachment-btn" id="attachmentBtn">
                        <i class="fas fa-paperclip"></i>
                    </button>
                    <button class="send-btn" id="sendBtn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="ai-features">
            <div class="feature-card">
                <div class="feature-icon">ğŸ”Š</div>
                <h3>è¯­éŸ³è®²è§£</h3>
                <p>æ”¯æŒè¯­éŸ³æ’­æ”¾ï¼Œéšæ—¶éšåœ°å­¦ä¹ </p>
                <button class="feature-btn" onclick="toggleVoiceMode()">
                    å¯ç”¨è¯­éŸ³
                </button>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">ğŸ“Š</div>
                <h3>å­¦ä¹ åˆ†æ</h3>
                <p>åˆ†æå­¦ä¹ è–„å¼±ç‚¹ï¼Œæ¨èå¤ä¹ é‡ç‚¹</p>
                <button class="feature-btn" onclick="showLearningAnalysis()">
                    æŸ¥çœ‹åˆ†æ
                </button>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">ğŸ“º</div>
                <h3>è§†é¢‘è§£æ</h3>
                <p>è§‚çœ‹åå¸ˆè§†é¢‘è®²è§£</p>
                <button class="feature-btn" onclick="openVideoLibrary()">
                    è§†é¢‘åº“
                </button>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">ğŸ¯</div>
                <h3>ä¸ªæ€§åŒ–æ¨è</h3>
                <p>åŸºäºå­¦ä¹ æƒ…å†µæ¨èå†…å®¹</p>
                <button class="feature-btn" onclick="getRecommendations()">
                    è·å–æ¨è
                </button>
            </div>
        </div>
    </div>
    
    <!-- æ–‡ä»¶ä¸Šä¼ æ¨¡æ€æ¡† -->
    <div class="modal" id="uploadModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ä¸Šä¼ é¢˜ç›®å›¾ç‰‡</h3>
                <button class="modal-close" onclick="closeUploadModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="upload-area" id="uploadArea">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p>æ‹–æ‹½å›¾ç‰‡åˆ°æ­¤å¤„æˆ–ç‚¹å‡»ä¸Šä¼ </p>
                    <input type="file" id="fileInput" accept="image/*" style="display: none;">
                    <button class="ant-btn ant-btn-primary" onclick="document.getElementById('fileInput').click()">
                        é€‰æ‹©æ–‡ä»¶
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// é¡µé¢åˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', function() {
    initAIPage();
});

function initAIPage() {
    bindAIEvents();
    scrollToBottom();
}

function bindAIEvents() {
    // å‘é€æ¶ˆæ¯
    const sendBtn = document.getElementById('sendBtn');
    const chatInput = document.getElementById('chatInput');
    
    if (sendBtn) {
        sendBtn.addEventListener('click', sendMessage);
    }
    
    if (chatInput) {
        chatInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    }
    
    // é™„ä»¶ä¸Šä¼ 
    const attachmentBtn = document.getElementById('attachmentBtn');
    if (attachmentBtn) {
        attachmentBtn.addEventListener('click', () => {
            document.getElementById('uploadModal').style.display = 'flex';
        });
    }
    
    // æ¸…ç©ºå¯¹è¯
    const clearBtn = document.getElementById('clearChat');
    if (clearBtn) {
        clearBtn.addEventListener('click', clearChat);
    }
    
    // è¯­éŸ³åˆ‡æ¢
    const voiceToggle = document.getElementById('voiceToggle');
    if (voiceToggle) {
        voiceToggle.addEventListener('click', toggleVoiceInput);
    }
}

function sendMessage() {
    const input = document.getElementById('chatInput');
    const message = input.value.trim();
    
    if (!message) return;
    
    // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
    addMessage(message, 'user');
    
    // æ¸…ç©ºè¾“å…¥æ¡†
    input.value = '';
    
    // æ¨¡æ‹ŸAIå›å¤
    setTimeout(() => {
        const aiResponse = generateAIResponse(message);
        addMessage(aiResponse, 'ai');
    }, 1000);
}

function addMessage(content, type) {
    const messagesContainer = document.getElementById('chatMessages');
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${type}-message`;
    
    const avatar = type === 'ai' ? 'ğŸ¤–' : 'å¼ ';
    const time = new Date().toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' });
    
    messageDiv.innerHTML = `
        <div class="avatar ${type}-avatar">${avatar}</div>
        <div class="message-content">
            <p>${content}</p>
        </div>
        <div class="message-time">${time}</div>
    `;
    
    messagesContainer.appendChild(messageDiv);
    scrollToBottom();
}

function generateAIResponse(userMessage) {
    // ç®€å•çš„AIå›å¤é€»è¾‘
    const responses = [
        'æˆ‘ç†è§£ä½ çš„é—®é¢˜ã€‚è®©æˆ‘æ¥å¸®ä½ åˆ†æä¸€ä¸‹è¿™é“é¢˜çš„è§£é¢˜æ€è·¯...',
        'è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é—®é¢˜ï¼è¿™ç±»é¢˜ç›®çš„å…³é”®åœ¨äº...',
        'æ ¹æ®ä½ çš„æè¿°ï¼Œæˆ‘å»ºè®®ä½ ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ¥ç†è§£è¿™é“é¢˜...',
        'è®©æˆ‘ä¸ºä½ è¯¦ç»†è®²è§£è¿™ä¸ªçŸ¥è¯†ç‚¹çš„åº”ç”¨æ–¹æ³•...'
    ];
    
    return responses[Math.floor(Math.random() * responses.length)];
}

function scrollToBottom() {
    const messagesContainer = document.getElementById('chatMessages');
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
}

function askQuickQuestion(type) {
    const questions = {
        'è§£é¢˜æ€è·¯': 'è¯·å¸®æˆ‘åˆ†æè¿™é“é¢˜çš„è§£é¢˜æ€è·¯',
        'çŸ¥è¯†ç‚¹': 'è¿™é“é¢˜æ¶‰åŠå“ªäº›çŸ¥è¯†ç‚¹ï¼Ÿ',
        'æ˜“é”™ç‚¹': 'è¿™ç±»é¢˜ç›®æœ‰å“ªäº›å¸¸è§çš„æ˜“é”™ç‚¹ï¼Ÿ',
        'ç»ƒä¹ é¢˜': 'èƒ½æ¨èä¸€äº›ç±»ä¼¼çš„ç»ƒä¹ é¢˜å—ï¼Ÿ'
    };
    
    const question = questions[type];
    if (question) {
        document.getElementById('chatInput').value = question;
        sendMessage();
    }
}

function playExplanation() {
    console.log('Playing voice explanation...');
    // è¯­éŸ³æ’­æ”¾é€»è¾‘
}

function showSimilarQuestions() {
    console.log('Showing similar questions...');
    // æ˜¾ç¤ºç›¸ä¼¼é¢˜ç›®
}

function clearChat() {
    const messagesContainer = document.getElementById('chatMessages');
    // ä¿ç•™æ¬¢è¿æ¶ˆæ¯
    const welcomeMessage = messagesContainer.querySelector('.ai-message');
    messagesContainer.innerHTML = '';
    if (welcomeMessage) {
        messagesContainer.appendChild(welcomeMessage.cloneNode(true));
    }
}

function toggleVoiceInput() {
    console.log('Toggling voice input...');
    // è¯­éŸ³è¾“å…¥åˆ‡æ¢é€»è¾‘
}

function toggleVoiceMode() {
    console.log('Toggling voice mode...');
}

function showLearningAnalysis() {
    console.log('Showing learning analysis...');
}

function openVideoLibrary() {
    console.log('Opening video library...');
}

function getRecommendations() {
    console.log('Getting personalized recommendations...');
}

function closeUploadModal() {
    document.getElementById('uploadModal').style.display = 'none';
}
</script>