<!-- é‡å¤é¢˜ç°‡é¡µé¢ -->
<div id="clusters" class="ant-page">
    <div class="page-header">
        <h2 class="page-title">é‡å¤é¢˜ç°‡åˆ†æ</h2>
        <div class="page-actions">
            <button class="ant-btn ant-btn-default" id="refreshClusters">
                <i class="fas fa-sync-alt"></i>
                åˆ·æ–°åˆ†æ
            </button>
            <button class="ant-btn ant-btn-primary" id="exportClusters">
                <i class="fas fa-download"></i>
                å¯¼å‡ºæŠ¥å‘Š
            </button>
        </div>
    </div>
    
    <div class="clusters-container">
        <!-- ç»Ÿè®¡æ¦‚è§ˆ -->
        <div class="clusters-stats">
            <div class="stat-card">
                <div class="stat-icon">ğŸ”—</div>
                <div class="stat-content">
                    <div class="stat-number">12</div>
                    <div class="stat-label">é¢˜ç°‡æ•°é‡</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ“Š</div>
                <div class="stat-content">
                    <div class="stat-number">68</div>
                    <div class="stat-label">å…³è”é¢˜ç›®</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ¯</div>
                <div class="stat-content">
                    <div class="stat-number">85%</div>
                    <div class="stat-label">ç›¸ä¼¼åº¦</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">âš¡</div>
                <div class="stat-content">
                    <div class="stat-number">24</div>
                    <div class="stat-label">é‡ç‚¹é¢˜ç°‡</div>
                </div>
            </div>
        </div>
        
        <!-- ç­›é€‰æ§åˆ¶ -->
        <div class="clusters-filters">
            <div class="filter-group">
                <label>å­¦ç§‘ç­›é€‰ï¼š</label>
                <select class="ant-select" id="subjectFilter">
                    <option value="">å…¨éƒ¨å­¦ç§‘</option>
                    <option value="math">æ•°å­¦</option>
                    <option value="physics">ç‰©ç†</option>
                    <option value="chemistry">åŒ–å­¦</option>
                    <option value="biology">ç”Ÿç‰©</option>
                </select>
            </div>
            <div class="filter-group">
                <label>ç›¸ä¼¼åº¦ï¼š</label>
                <select class="ant-select" id="similarityFilter">
                    <option value="">å…¨éƒ¨</option>
                    <option value="high">é«˜ç›¸ä¼¼åº¦ (>80%)</option>
                    <option value="medium">ä¸­ç­‰ç›¸ä¼¼åº¦ (60-80%)</option>
                    <option value="low">ä½ç›¸ä¼¼åº¦ (<60%)</option>
                </select>
            </div>
            <div class="filter-group">
                <label>é¢˜ç°‡å¤§å°ï¼š</label>
                <select class="ant-select" id="sizeFilter">
                    <option value="">å…¨éƒ¨</option>
                    <option value="large">å¤§é¢˜ç°‡ (>5é¢˜)</option>
                    <option value="medium">ä¸­ç­‰é¢˜ç°‡ (3-5é¢˜)</option>
                    <option value="small">å°é¢˜ç°‡ (2é¢˜)</option>
                </select>
            </div>
        </div>
        
        <!-- å¯è§†åŒ–å›¾è¡¨åŒºåŸŸ -->
        <div class="visualization-container">
            <div class="chart-header">
                <h3>é¢˜ç°‡å…³ç³»å›¾</h3>
                <div class="chart-controls">
                    <button class="chart-btn active" data-view="network">ç½‘ç»œå›¾</button>
                    <button class="chart-btn" data-view="tree">æ ‘çŠ¶å›¾</button>
                    <button class="chart-btn" data-view="matrix">çŸ©é˜µå›¾</button>
                </div>
            </div>
            <div class="chart-container">
                <div id="forceGraph" class="force-graph">
                    <!-- åŠ›å¯¼å‘å›¾å°†åœ¨è¿™é‡Œæ¸²æŸ“ -->
                    <svg width="100%" height="400">
                        <!-- ç¤ºä¾‹èŠ‚ç‚¹å’Œè¿çº¿ -->
                        <defs>
                            <marker id="arrowhead" markerWidth="10" markerHeight="7" 
                                    refX="9" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
                            </marker>
                        </defs>
                        
                        <!-- è¿çº¿ -->
                        <line x1="150" y1="100" x2="250" y2="150" stroke="#1890ff" stroke-width="2" marker-end="url(#arrowhead)"/>
                        <line x1="250" y1="150" x2="350" y2="100" stroke="#1890ff" stroke-width="2" marker-end="url(#arrowhead)"/>
                        <line x1="150" y1="100" x2="200" y2="250" stroke="#52c41a" stroke-width="3" marker-end="url(#arrowhead)"/>
                        <line x1="350" y1="100" x2="400" y2="200" stroke="#faad14" stroke-width="2" marker-end="url(#arrowhead)"/>
                        
                        <!-- èŠ‚ç‚¹ -->
                        <circle cx="150" cy="100" r="20" fill="#1890ff" stroke="#fff" stroke-width="2"/>
                        <circle cx="250" cy="150" r="25" fill="#52c41a" stroke="#fff" stroke-width="2"/>
                        <circle cx="350" cy="100" r="20" fill="#1890ff" stroke="#fff" stroke-width="2"/>
                        <circle cx="200" cy="250" r="30" fill="#f5222d" stroke="#fff" stroke-width="2"/>
                        <circle cx="400" cy="200" r="15" fill="#faad14" stroke="#fff" stroke-width="2"/>
                        
                        <!-- æ ‡ç­¾ -->
                        <text x="150" y="105" text-anchor="middle" fill="white" font-size="12">C1</text>
                        <text x="250" y="155" text-anchor="middle" fill="white" font-size="12">C2</text>
                        <text x="350" y="105" text-anchor="middle" fill="white" font-size="12">C3</text>
                        <text x="200" y="255" text-anchor="middle" fill="white" font-size="12">C4</text>
                        <text x="400" y="205" text-anchor="middle" fill="white" font-size="12">C5</text>
                    </svg>
                    
                    <div class="graph-legend">
                        <div class="legend-item">
                            <div class="legend-color" style="background: #1890ff;"></div>
                            <span>æ™®é€šé¢˜ç°‡</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #52c41a;"></div>
                            <span>é‡ç‚¹é¢˜ç°‡</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #f5222d;"></div>
                            <span>éš¾ç‚¹é¢˜ç°‡</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #faad14;"></div>
                            <span>æ˜“é”™é¢˜ç°‡</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- é¢˜ç°‡åˆ—è¡¨ -->
        <div class="clusters-list">
            <div class="list-header">
                <h3>é¢˜ç°‡è¯¦æƒ…</h3>
                <div class="list-controls">
                    <input type="text" class="search-input" placeholder="æœç´¢é¢˜ç°‡..." id="clusterSearch">
                    <button class="sort-btn" id="sortBtn">
                        <i class="fas fa-sort"></i>
                        æ’åº
                    </button>
                </div>
            </div>
            
            <div class="cluster-cards">
                <div class="cluster-card">
                    <div class="cluster-header">
                        <div class="cluster-title">
                            <span class="cluster-id">é¢˜ç°‡ #001</span>
                            <span class="cluster-type type-important">é‡ç‚¹</span>
                        </div>
                        <div class="cluster-stats">
                            <span class="stat">5é¢˜</span>
                            <span class="stat">92%ç›¸ä¼¼åº¦</span>
                        </div>
                    </div>
                    <div class="cluster-content">
                        <div class="cluster-subject">æ•°å­¦ - å‡½æ•°ä¸å¯¼æ•°</div>
                        <div class="cluster-description">
                            å¤åˆå‡½æ•°æ±‚å¯¼ç›¸å…³é¢˜ç›®ï¼Œä¸»è¦è€ƒæŸ¥é“¾å¼æ³•åˆ™çš„åº”ç”¨
                        </div>
                        <div class="cluster-questions">
                            <div class="question-tag">Q001</div>
                            <div class="question-tag">Q015</div>
                            <div class="question-tag">Q032</div>
                            <div class="question-tag">Q048</div>
                            <div class="question-tag">Q067</div>
                        </div>
                    </div>
                    <div class="cluster-actions">
                        <button class="action-btn" onclick="viewClusterDetail(1)">
                            <i class="fas fa-eye"></i>
                            æŸ¥çœ‹è¯¦æƒ…
                        </button>
                        <button class="action-btn" onclick="practiceCluster(1)">
                            <i class="fas fa-play"></i>
                            å¼€å§‹ç»ƒä¹ 
                        </button>
                        <button class="action-btn" onclick="exportCluster(1)">
                            <i class="fas fa-download"></i>
                            å¯¼å‡º
                        </button>
                    </div>
                </div>
                
                <div class="cluster-card">
                    <div class="cluster-header">
                        <div class="cluster-title">
                            <span class="cluster-id">é¢˜ç°‡ #002</span>
                            <span class="cluster-type type-difficult">éš¾ç‚¹</span>
                        </div>
                        <div class="cluster-stats">
                            <span class="stat">3é¢˜</span>
                            <span class="stat">87%ç›¸ä¼¼åº¦</span>
                        </div>
                    </div>
                    <div class="cluster-content">
                        <div class="cluster-subject">ç‰©ç† - ç”µç£æ„Ÿåº”</div>
                        <div class="cluster-description">
                            ç”µç£æ„Ÿåº”å®šå¾‹åº”ç”¨é¢˜ï¼Œæ¶‰åŠæ„Ÿåº”ç”µåŠ¨åŠ¿è®¡ç®—
                        </div>
                        <div class="cluster-questions">
                            <div class="question-tag">Q008</div>
                            <div class="question-tag">Q023</div>
                            <div class="question-tag">Q041</div>
                        </div>
                    </div>
                    <div class="cluster-actions">
                        <button class="action-btn" onclick="viewClusterDetail(2)">
                            <i class="fas fa-eye"></i>
                            æŸ¥çœ‹è¯¦æƒ…
                        </button>
                        <button class="action-btn" onclick="practiceCluster(2)">
                            <i class="fas fa-play"></i>
                            å¼€å§‹ç»ƒä¹ 
                        </button>
                        <button class="action-btn" onclick="exportCluster(2)">
                            <i class="fas fa-download"></i>
                            å¯¼å‡º
                        </button>
                    </div>
                </div>
                
                <div class="cluster-card">
                    <div class="cluster-header">
                        <div class="cluster-title">
                            <span class="cluster-id">é¢˜ç°‡ #003</span>
                            <span class="cluster-type type-error">æ˜“é”™</span>
                        </div>
                        <div class="cluster-stats">
                            <span class="stat">4é¢˜</span>
                            <span class="stat">78%ç›¸ä¼¼åº¦</span>
                        </div>
                    </div>
                    <div class="cluster-content">
                        <div class="cluster-subject">åŒ–å­¦ - æœ‰æœºåŒ–å­¦</div>
                        <div class="cluster-description">
                            æœ‰æœºç‰©å‘½åè§„åˆ™ï¼Œå®¹æ˜“æ··æ·†çš„åŒåˆ†å¼‚æ„ä½“
                        </div>
                        <div class="cluster-questions">
                            <div class="question-tag">Q012</div>
                            <div class="question-tag">Q029</div>
                            <div class="question-tag">Q045</div>
                            <div class="question-tag">Q056</div>
                        </div>
                    </div>
                    <div class="cluster-actions">
                        <button class="action-btn" onclick="viewClusterDetail(3)">
                            <i class="fas fa-eye"></i>
                            æŸ¥çœ‹è¯¦æƒ…
                        </button>
                        <button class="action-btn" onclick="practiceCluster(3)">
                            <i class="fas fa-play"></i>
                            å¼€å§‹ç»ƒä¹ 
                        </button>
                        <button class="action-btn" onclick="exportCluster(3)">
                            <i class="fas fa-download"></i>
                            å¯¼å‡º
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// é¡µé¢åˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', function() {
    initClustersPage();
});

function initClustersPage() {
    bindClustersEvents();
    loadClustersData();
}

function bindClustersEvents() {
    // ç­›é€‰äº‹ä»¶
    const filters = ['subjectFilter', 'similarityFilter', 'sizeFilter'];
    filters.forEach(filterId => {
        const filter = document.getElementById(filterId);
        if (filter) {
            filter.addEventListener('change', filterClusters);
        }
    });
    
    // æœç´¢äº‹ä»¶
    const searchInput = document.getElementById('clusterSearch');
    if (searchInput) {
        searchInput.addEventListener('input', searchClusters);
    }
    
    // å›¾è¡¨è§†å›¾åˆ‡æ¢
    const chartBtns = document.querySelectorAll('.chart-btn');
    chartBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            chartBtns.forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            switchChartView(this.dataset.view);
        });
    });
    
    // åˆ·æ–°å’Œå¯¼å‡º
    const refreshBtn = document.getElementById('refreshClusters');
    if (refreshBtn) {
        refreshBtn.addEventListener('click', refreshClustersAnalysis);
    }
    
    const exportBtn = document.getElementById('exportClusters');
    if (exportBtn) {
        exportBtn.addEventListener('click', exportClustersReport);
    }
}

function loadClustersData() {
    // æ¨¡æ‹ŸåŠ è½½é¢˜ç°‡æ•°æ®
    console.log('Loading clusters data...');
}

function filterClusters() {
    const subject = document.getElementById('subjectFilter').value;
    const similarity = document.getElementById('similarityFilter').value;
    const size = document.getElementById('sizeFilter').value;
    
    console.log('Filtering clusters:', { subject, similarity, size });
    // å®ç°ç­›é€‰é€»è¾‘
}

function searchClusters() {
    const query = document.getElementById('clusterSearch').value;
    console.log('Searching clusters:', query);
    // å®ç°æœç´¢é€»è¾‘
}

function switchChartView(view) {
    console.log('Switching to chart view:', view);
    // å®ç°å›¾è¡¨è§†å›¾åˆ‡æ¢
}

function viewClusterDetail(clusterId) {
    console.log('Viewing cluster detail:', clusterId);
    // æ˜¾ç¤ºé¢˜ç°‡è¯¦æƒ…
}

function practiceCluster(clusterId) {
    console.log('Starting cluster practice:', clusterId);
    // å¼€å§‹é¢˜ç°‡ç»ƒä¹ 
}

function exportCluster(clusterId) {
    console.log('Exporting cluster:', clusterId);
    // å¯¼å‡ºå•ä¸ªé¢˜ç°‡
}

function refreshClustersAnalysis() {
    console.log('Refreshing clusters analysis...');
    // é‡æ–°åˆ†æé¢˜ç°‡
}

function exportClustersReport() {
    console.log('Exporting clusters report...');
    // å¯¼å‡ºå®Œæ•´æŠ¥å‘Š
}
</script>